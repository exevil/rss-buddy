name: Output Branch Readme

on:
  workflow_dispatch:
  push:
    branches:
      - output
    paths:
      - 'README.md'

jobs:
  update-readme:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/output'
    steps:
      - uses: actions/checkout@v3
        with:
          ref: output
      - name: Update README
        run: |
          echo "# RSS-Buddy Output Branch" > README.md
          echo "" >> README.md
          echo "This branch contains only the processed RSS feeds and state file generated by rss-buddy." >> README.md
          echo "" >> README.md
          echo "The main branch contains the actual source code of the project." >> README.md
          echo "" >> README.md
          echo "These files are automatically updated by GitHub Actions." >> README.md
          echo "" >> README.md
          echo "Last updated: $(date +'%Y-%m-%d %H:%M:%S')" >> README.md
          
          git config --global user.name 'GitHub Action'
          git config --global user.email 'action@github.com'
          git add README.md
          git commit -m "Update README" || echo "No changes to commit"
          git push 